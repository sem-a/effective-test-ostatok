# README для сервиса остатков товаров в магазине

## Описание
Этот проект представляет собой сервис, который управляет остатками товаров в магазинах. Он позволяет создавать товары и их остатки, а также выполнять операции по увеличению и уменьшению остатков на полках.

## Установка

1. **Клонируйте репозиторий:**
   ```bash
   git clone https://github.com/sem-a/effective-test-ostatok
   cd stock-service
   ```

2. **Установите зависимости:**
   ```bash
   npm install
   ```

3. **Настройте базу данных:**
    - Создайте новую базу данных.
    - Обновите файл `.env` с вашими данными подключения к базе:
      ```
      DATABASE_URL="postgresql://<пользователь>:<пароль>@localhost:<порт>/<имя_бд>"
      ```

4. **Инициализируйте Prisma (если используется):**
    ```bash
    npx prisma init
    ```

5. **Создайте миграцию базы данных:** 
    ```bash
    npx prisma migrate dev --name init_stock_table 
    ```

6. **Заполните БД тестовыми данными (опционально).**

## Запуск приложения

Чтобы запустить приложение, используйте команду:

```bash
npm run start 
```
Приложение будет доступно по адресу http://localhost:3000.

### Эндпоинты API

- `POST /api/stock/create`: Создает новый товарный остаток.
  - Тело запроса должно содержать поля PLU, название товара, количество на полке и количестве в заказе.

- `PUT /api/stock/increase`: Увеличивает количество товара на складе.
  - Тело запроса должно содержать идентификатор товара и количество для добавления.

- `PUT /api/stock/decrease`: Уменьшает количество товара на складе.
  - Тело запроса должно содержать идентификатор товара и количество для вычитания.

- `GET /api/stock/get`: Получает список остатков по фильтрам:
  - Параметры фильтрации могут включать plu, shop_id,
количество остатков на полке (с-по), количества остатков в заказе (с-по).

- `GET /api/shop/get`: Получает информацию о магазинах из системы.

- `GET /api/product/get`: Получает информацию о продуктах с возможностью фильтрации по имени или артикулу (plu).

- `POST /api/product/create`: Создает новый продукт с указанным названием и PLU.

